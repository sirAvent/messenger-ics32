<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>ds_messenger API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>ds_messenger</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import socket
import ds_protocol
import time


class DirectMessage(dict):
    &#39;&#39;&#39;
    The DirectMessage class is responsible for working with individual user directmessages.
    It currently supports two features: 
    A timestamp property that is set upon instantiation and when the entry object
    is set and an entry property that stores the direct message.
    &#39;&#39;&#39;
    def __init__(self):
        self.recipient = None
        self.message = None
        self.timestamp = None

        # Subclass dict to expose DirectMessage properties for serialization
        dict.__init__(self, message=self.message, recipient=self.recipient, timestamp=self.timestamp)
    
    def set_message(self, message:str):
        &#39;&#39;&#39;
        Set the message attribute as specified string.
        &#39;&#39;&#39;
        self._message = message
        dict.__setitem__(self, &#39;message&#39;, message)

        # If timestamp has not been set, generate a new from time module
        if self._timestamp == 0:
            self._timestamp = time.time()

    def get_message(self):
        &#39;&#39;&#39;
        Return a message entry.
        &#39;&#39;&#39;
        return self._message
    
    def set_time(self, time:float):
        &#39;&#39;&#39;
        Set the value of timestamp to current time.
        &#39;&#39;&#39;
        self._timestamp = time
        dict.__setitem__(self, &#39;timestamp&#39;, time)
    
    def get_time(self):
        &#39;&#39;&#39;
        Return the value of timestamp.
        &#39;&#39;&#39;
        return self._timestamp

    &#34;&#34;&#34;
    The property method is used to support get and set capability for entry and time values.
    When the value for entry is changed, or set, the timestamp field is updated to the
    current time.
    &#34;&#34;&#34; 
    entry = property(get_message, set_message)
    timestamp = property(get_time, set_time)

class DirectMessenger:
    &#39;&#39;&#39;
    An object for a person&#39;s account.
    Responsible for creating an instance of a DirectMessenger &#34;account&#34;
    &#39;&#39;&#39;
    def __init__(self, dsuserver=None, username=None, password=None):
        self.token = &#39;&#39;
        self.dsuserver = dsuserver
        self.username = username
        self.password = password
        self.port = 3021

                
    def send(self, message:str, recipient:str) -&gt; bool:
        &#39;&#39;&#39;
        Send a directmessage to another DS user
        Return true if message successfully sent, false if send failed.
        Send a JSON String in this format:
        {&#34;token&#34;:&#34;user_token&#34;, &#34;directmessage&#34;: {&#34;entry&#34;: &#34;Hello World!&#34;,&#34;recipient&#34;:&#34;ohhimark&#34;, &#34;timestamp&#34;: &#34;1603167689.3928561&#34;}}
        &#39;&#39;&#39;
        self.message = message
        self.recipient = recipient

        join_msg = ds_protocol.join(self.username, self.password, self.token)
        try:
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client:
                client.connect((self.dsuserver, self.port))
                
                client.sendall(join_msg.encode(&#39;utf-8&#39;))
                srv_msg = client.recv(4096)
                userToken = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).token
                response = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).userType
                 
                if response == &#39;ok&#39;:
                    send_msg = ds_protocol.sendMSG(userToken, message, recipient)
                    client.sendall(send_msg.encode(&#39;utf-8&#39;))
                    srv_msg2 = client.recv(4096)
                    
                    return True
                else:
                    return False
        except Exception as e:
            print(e)

                    
    def retrieve_new(self) -&gt; list:
        &#39;&#39;&#39;
        Request unread message from the DS server and
        Return a list of DirectMessage objects containing all new messages
        Send JSON String in this format:
        {&#34;token&#34;:&#34;user_token&#34;, &#34;directmessage&#34;: &#34;new&#34;}
        &#39;&#39;&#39;
        join_msg = ds_protocol.join(self.username, self.password, self.token)
        try:
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client:
                client.connect((self.dsuserver, self.port))
                
                client.sendall(join_msg.encode(&#39;utf-8&#39;))
                srv_msg = client.recv(4096)
                userToken = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).token
                response = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).userType
                msg = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).message
                
                if response == &#39;ok&#39;:
                    retrieve_msg = &#39;{&#34;token&#34;: &#34;&#39; + userToken + &#39;&#34;, &#34;directmessage&#34;: &#34;new&#34;}&#39;
                    client.sendall(retrieve_msg.encode(&#39;utf-8&#39;))
                    srv_msg2 = client.recv(4096)
                    response2 = ds_protocol.postextract_json(srv_msg2.decode(&#39;utf-8&#39;)).message
                    return response2
                else:
                    print(msg)
        except Exception as e:
            print(e)

 
    def retrieve_all(self) -&gt; list:
        &#39;&#39;&#39;
        Request all messages from the DS server and
        Return a list of DirectMessage objects containing all messages
        
        Send JSON String in this format:
        {&#34;token&#34;:&#34;user_token&#34;, &#34;directmessage&#34;: &#34;all&#34;}
        &#39;&#39;&#39;
        join_msg = ds_protocol.join(self.username, self.password, self.token)
        try:
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client:
                client.connect((self.dsuserver, self.port))
                    
                client.sendall(join_msg.encode(&#39;utf-8&#39;))
                srv_msg = client.recv(4096)
                userToken = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).token
                response = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).userType
                msg = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).message
                    
                if response == &#39;ok&#39;:
                    retrieve_msg = &#39;{&#34;token&#34;: &#34;&#39; + userToken + &#39;&#34;, &#34;directmessage&#34;: &#34;all&#34;}&#39;
                    client.sendall(retrieve_msg.encode(&#39;utf-8&#39;))
                    srv_msg2 = client.recv(4096)
                    response2 = ds_protocol.postextract_json(srv_msg2.decode(&#39;utf-8&#39;)).message
                    return response2
                else:
                    return []
        except Exception:
            print(DeniedConnection(Exception).message)
            return []
            


class DeniedConnection(Exception):
    &#39;&#39;&#39;
    A custom exception class used for handling specific errors
    such as RefusedConnection. Print a string to handle the exception.
    &#39;&#39;&#39;
    def __init__(self, message):
        self.message = &#39;Connection Denied. Server Refused.&#39;


    </code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="ds_messenger.DeniedConnection"><code class="flex name class">
<span>class <span class="ident">DeniedConnection</span></span>
<span>(</span><span>message)</span>
</code></dt>
<dd>
<div class="desc"><p>A custom exception class used for handling specific errors
such as RefusedConnection. Print a string to handle the exception.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DeniedConnection(Exception):
    &#39;&#39;&#39;
    A custom exception class used for handling specific errors
    such as RefusedConnection. Print a string to handle the exception.
    &#39;&#39;&#39;
    def __init__(self, message):
        self.message = &#39;Connection Denied. Server Refused.&#39;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="ds_messenger.DirectMessage"><code class="flex name class">
<span>class <span class="ident">DirectMessage</span></span>
</code></dt>
<dd>
<div class="desc"><p>The DirectMessage class is responsible for working with individual user directmessages.
It currently supports two features:
A timestamp property that is set upon instantiation and when the entry object
is set and an entry property that stores the direct message.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DirectMessage(dict):
    &#39;&#39;&#39;
    The DirectMessage class is responsible for working with individual user directmessages.
    It currently supports two features: 
    A timestamp property that is set upon instantiation and when the entry object
    is set and an entry property that stores the direct message.
    &#39;&#39;&#39;
    def __init__(self):
        self.recipient = None
        self.message = None
        self.timestamp = None

        # Subclass dict to expose DirectMessage properties for serialization
        dict.__init__(self, message=self.message, recipient=self.recipient, timestamp=self.timestamp)
    
    def set_message(self, message:str):
        &#39;&#39;&#39;
        Set the message attribute as specified string.
        &#39;&#39;&#39;
        self._message = message
        dict.__setitem__(self, &#39;message&#39;, message)

        # If timestamp has not been set, generate a new from time module
        if self._timestamp == 0:
            self._timestamp = time.time()

    def get_message(self):
        &#39;&#39;&#39;
        Return a message entry.
        &#39;&#39;&#39;
        return self._message
    
    def set_time(self, time:float):
        &#39;&#39;&#39;
        Set the value of timestamp to current time.
        &#39;&#39;&#39;
        self._timestamp = time
        dict.__setitem__(self, &#39;timestamp&#39;, time)
    
    def get_time(self):
        &#39;&#39;&#39;
        Return the value of timestamp.
        &#39;&#39;&#39;
        return self._timestamp

    &#34;&#34;&#34;
    The property method is used to support get and set capability for entry and time values.
    When the value for entry is changed, or set, the timestamp field is updated to the
    current time.
    &#34;&#34;&#34; 
    entry = property(get_message, set_message)
    timestamp = property(get_time, set_time)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.dict</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="ds_messenger.DirectMessage.entry"><code class="name">var <span class="ident">entry</span></code></dt>
<dd>
<div class="desc"><p>Return a message entry.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_message(self):
    &#39;&#39;&#39;
    Return a message entry.
    &#39;&#39;&#39;
    return self._message</code></pre>
</details>
</dd>
<dt id="ds_messenger.DirectMessage.timestamp"><code class="name">var <span class="ident">timestamp</span></code></dt>
<dd>
<div class="desc"><p>Return the value of timestamp.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_time(self):
    &#39;&#39;&#39;
    Return the value of timestamp.
    &#39;&#39;&#39;
    return self._timestamp</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="ds_messenger.DirectMessage.get_message"><code class="name flex">
<span>def <span class="ident">get_message</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Return a message entry.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_message(self):
    &#39;&#39;&#39;
    Return a message entry.
    &#39;&#39;&#39;
    return self._message</code></pre>
</details>
</dd>
<dt id="ds_messenger.DirectMessage.get_time"><code class="name flex">
<span>def <span class="ident">get_time</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Return the value of timestamp.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_time(self):
    &#39;&#39;&#39;
    Return the value of timestamp.
    &#39;&#39;&#39;
    return self._timestamp</code></pre>
</details>
</dd>
<dt id="ds_messenger.DirectMessage.set_message"><code class="name flex">
<span>def <span class="ident">set_message</span></span>(<span>self, message: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Set the message attribute as specified string.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_message(self, message:str):
    &#39;&#39;&#39;
    Set the message attribute as specified string.
    &#39;&#39;&#39;
    self._message = message
    dict.__setitem__(self, &#39;message&#39;, message)

    # If timestamp has not been set, generate a new from time module
    if self._timestamp == 0:
        self._timestamp = time.time()</code></pre>
</details>
</dd>
<dt id="ds_messenger.DirectMessage.set_time"><code class="name flex">
<span>def <span class="ident">set_time</span></span>(<span>self, time: float)</span>
</code></dt>
<dd>
<div class="desc"><p>Set the value of timestamp to current time.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_time(self, time:float):
    &#39;&#39;&#39;
    Set the value of timestamp to current time.
    &#39;&#39;&#39;
    self._timestamp = time
    dict.__setitem__(self, &#39;timestamp&#39;, time)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="ds_messenger.DirectMessenger"><code class="flex name class">
<span>class <span class="ident">DirectMessenger</span></span>
<span>(</span><span>dsuserver=None, username=None, password=None)</span>
</code></dt>
<dd>
<div class="desc"><p>An object for a person's account.
Responsible for creating an instance of a DirectMessenger "account"</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DirectMessenger:
    &#39;&#39;&#39;
    An object for a person&#39;s account.
    Responsible for creating an instance of a DirectMessenger &#34;account&#34;
    &#39;&#39;&#39;
    def __init__(self, dsuserver=None, username=None, password=None):
        self.token = &#39;&#39;
        self.dsuserver = dsuserver
        self.username = username
        self.password = password
        self.port = 3021

                
    def send(self, message:str, recipient:str) -&gt; bool:
        &#39;&#39;&#39;
        Send a directmessage to another DS user
        Return true if message successfully sent, false if send failed.
        Send a JSON String in this format:
        {&#34;token&#34;:&#34;user_token&#34;, &#34;directmessage&#34;: {&#34;entry&#34;: &#34;Hello World!&#34;,&#34;recipient&#34;:&#34;ohhimark&#34;, &#34;timestamp&#34;: &#34;1603167689.3928561&#34;}}
        &#39;&#39;&#39;
        self.message = message
        self.recipient = recipient

        join_msg = ds_protocol.join(self.username, self.password, self.token)
        try:
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client:
                client.connect((self.dsuserver, self.port))
                
                client.sendall(join_msg.encode(&#39;utf-8&#39;))
                srv_msg = client.recv(4096)
                userToken = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).token
                response = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).userType
                 
                if response == &#39;ok&#39;:
                    send_msg = ds_protocol.sendMSG(userToken, message, recipient)
                    client.sendall(send_msg.encode(&#39;utf-8&#39;))
                    srv_msg2 = client.recv(4096)
                    
                    return True
                else:
                    return False
        except Exception as e:
            print(e)

                    
    def retrieve_new(self) -&gt; list:
        &#39;&#39;&#39;
        Request unread message from the DS server and
        Return a list of DirectMessage objects containing all new messages
        Send JSON String in this format:
        {&#34;token&#34;:&#34;user_token&#34;, &#34;directmessage&#34;: &#34;new&#34;}
        &#39;&#39;&#39;
        join_msg = ds_protocol.join(self.username, self.password, self.token)
        try:
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client:
                client.connect((self.dsuserver, self.port))
                
                client.sendall(join_msg.encode(&#39;utf-8&#39;))
                srv_msg = client.recv(4096)
                userToken = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).token
                response = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).userType
                msg = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).message
                
                if response == &#39;ok&#39;:
                    retrieve_msg = &#39;{&#34;token&#34;: &#34;&#39; + userToken + &#39;&#34;, &#34;directmessage&#34;: &#34;new&#34;}&#39;
                    client.sendall(retrieve_msg.encode(&#39;utf-8&#39;))
                    srv_msg2 = client.recv(4096)
                    response2 = ds_protocol.postextract_json(srv_msg2.decode(&#39;utf-8&#39;)).message
                    return response2
                else:
                    print(msg)
        except Exception as e:
            print(e)

 
    def retrieve_all(self) -&gt; list:
        &#39;&#39;&#39;
        Request all messages from the DS server and
        Return a list of DirectMessage objects containing all messages
        
        Send JSON String in this format:
        {&#34;token&#34;:&#34;user_token&#34;, &#34;directmessage&#34;: &#34;all&#34;}
        &#39;&#39;&#39;
        join_msg = ds_protocol.join(self.username, self.password, self.token)
        try:
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client:
                client.connect((self.dsuserver, self.port))
                    
                client.sendall(join_msg.encode(&#39;utf-8&#39;))
                srv_msg = client.recv(4096)
                userToken = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).token
                response = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).userType
                msg = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).message
                    
                if response == &#39;ok&#39;:
                    retrieve_msg = &#39;{&#34;token&#34;: &#34;&#39; + userToken + &#39;&#34;, &#34;directmessage&#34;: &#34;all&#34;}&#39;
                    client.sendall(retrieve_msg.encode(&#39;utf-8&#39;))
                    srv_msg2 = client.recv(4096)
                    response2 = ds_protocol.postextract_json(srv_msg2.decode(&#39;utf-8&#39;)).message
                    return response2
                else:
                    return []
        except Exception:
            print(DeniedConnection(Exception).message)
            return []</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="ds_messenger.DirectMessenger.retrieve_all"><code class="name flex">
<span>def <span class="ident">retrieve_all</span></span>(<span>self) ‑> list</span>
</code></dt>
<dd>
<div class="desc"><p>Request all messages from the DS server and
Return a list of DirectMessage objects containing all messages</p>
<p _all_="&quot;all&quot;" _directmessage_:="&quot;directmessage&quot;:" _token_:_user_token_="&quot;token&quot;:&quot;user_token&quot;,">Send JSON String in this format:</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def retrieve_all(self) -&gt; list:
    &#39;&#39;&#39;
    Request all messages from the DS server and
    Return a list of DirectMessage objects containing all messages
    
    Send JSON String in this format:
    {&#34;token&#34;:&#34;user_token&#34;, &#34;directmessage&#34;: &#34;all&#34;}
    &#39;&#39;&#39;
    join_msg = ds_protocol.join(self.username, self.password, self.token)
    try:
        with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client:
            client.connect((self.dsuserver, self.port))
                
            client.sendall(join_msg.encode(&#39;utf-8&#39;))
            srv_msg = client.recv(4096)
            userToken = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).token
            response = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).userType
            msg = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).message
                
            if response == &#39;ok&#39;:
                retrieve_msg = &#39;{&#34;token&#34;: &#34;&#39; + userToken + &#39;&#34;, &#34;directmessage&#34;: &#34;all&#34;}&#39;
                client.sendall(retrieve_msg.encode(&#39;utf-8&#39;))
                srv_msg2 = client.recv(4096)
                response2 = ds_protocol.postextract_json(srv_msg2.decode(&#39;utf-8&#39;)).message
                return response2
            else:
                return []
    except Exception:
        print(DeniedConnection(Exception).message)
        return []</code></pre>
</details>
</dd>
<dt id="ds_messenger.DirectMessenger.retrieve_new"><code class="name flex">
<span>def <span class="ident">retrieve_new</span></span>(<span>self) ‑> list</span>
</code></dt>
<dd>
<div class="desc"><p _directmessage_:="&quot;directmessage&quot;:" _new_="&quot;new&quot;" _token_:_user_token_="&quot;token&quot;:&quot;user_token&quot;,">Request unread message from the DS server and
Return a list of DirectMessage objects containing all new messages
Send JSON String in this format:</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def retrieve_new(self) -&gt; list:
    &#39;&#39;&#39;
    Request unread message from the DS server and
    Return a list of DirectMessage objects containing all new messages
    Send JSON String in this format:
    {&#34;token&#34;:&#34;user_token&#34;, &#34;directmessage&#34;: &#34;new&#34;}
    &#39;&#39;&#39;
    join_msg = ds_protocol.join(self.username, self.password, self.token)
    try:
        with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client:
            client.connect((self.dsuserver, self.port))
            
            client.sendall(join_msg.encode(&#39;utf-8&#39;))
            srv_msg = client.recv(4096)
            userToken = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).token
            response = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).userType
            msg = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).message
            
            if response == &#39;ok&#39;:
                retrieve_msg = &#39;{&#34;token&#34;: &#34;&#39; + userToken + &#39;&#34;, &#34;directmessage&#34;: &#34;new&#34;}&#39;
                client.sendall(retrieve_msg.encode(&#39;utf-8&#39;))
                srv_msg2 = client.recv(4096)
                response2 = ds_protocol.postextract_json(srv_msg2.decode(&#39;utf-8&#39;)).message
                return response2
            else:
                print(msg)
    except Exception as e:
        print(e)</code></pre>
</details>
</dd>
<dt id="ds_messenger.DirectMessenger.send"><code class="name flex">
<span>def <span class="ident">send</span></span>(<span>self, message: str, recipient: str) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Send a directmessage to another DS user
Return true if message successfully sent, false if send failed.
Send a JSON String in this format:
{"token":"user_token", "directmessage": {"entry": "Hello World!","recipient":"ohhimark", "timestamp": "1603167689.3928561"}}</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def send(self, message:str, recipient:str) -&gt; bool:
    &#39;&#39;&#39;
    Send a directmessage to another DS user
    Return true if message successfully sent, false if send failed.
    Send a JSON String in this format:
    {&#34;token&#34;:&#34;user_token&#34;, &#34;directmessage&#34;: {&#34;entry&#34;: &#34;Hello World!&#34;,&#34;recipient&#34;:&#34;ohhimark&#34;, &#34;timestamp&#34;: &#34;1603167689.3928561&#34;}}
    &#39;&#39;&#39;
    self.message = message
    self.recipient = recipient

    join_msg = ds_protocol.join(self.username, self.password, self.token)
    try:
        with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client:
            client.connect((self.dsuserver, self.port))
            
            client.sendall(join_msg.encode(&#39;utf-8&#39;))
            srv_msg = client.recv(4096)
            userToken = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).token
            response = ds_protocol.extract_json(srv_msg.decode(&#39;utf-8&#39;)).userType
             
            if response == &#39;ok&#39;:
                send_msg = ds_protocol.sendMSG(userToken, message, recipient)
                client.sendall(send_msg.encode(&#39;utf-8&#39;))
                srv_msg2 = client.recv(4096)
                
                return True
            else:
                return False
    except Exception as e:
        print(e)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="ds_messenger.DeniedConnection" href="#ds_messenger.DeniedConnection">DeniedConnection</a></code></h4>
</li>
<li>
<h4><code><a title="ds_messenger.DirectMessage" href="#ds_messenger.DirectMessage">DirectMessage</a></code></h4>
<ul class="two-column">
<li><code><a title="ds_messenger.DirectMessage.entry" href="#ds_messenger.DirectMessage.entry">entry</a></code></li>
<li><code><a title="ds_messenger.DirectMessage.get_message" href="#ds_messenger.DirectMessage.get_message">get_message</a></code></li>
<li><code><a title="ds_messenger.DirectMessage.get_time" href="#ds_messenger.DirectMessage.get_time">get_time</a></code></li>
<li><code><a title="ds_messenger.DirectMessage.set_message" href="#ds_messenger.DirectMessage.set_message">set_message</a></code></li>
<li><code><a title="ds_messenger.DirectMessage.set_time" href="#ds_messenger.DirectMessage.set_time">set_time</a></code></li>
<li><code><a title="ds_messenger.DirectMessage.timestamp" href="#ds_messenger.DirectMessage.timestamp">timestamp</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="ds_messenger.DirectMessenger" href="#ds_messenger.DirectMessenger">DirectMessenger</a></code></h4>
<ul class="">
<li><code><a title="ds_messenger.DirectMessenger.retrieve_all" href="#ds_messenger.DirectMessenger.retrieve_all">retrieve_all</a></code></li>
<li><code><a title="ds_messenger.DirectMessenger.retrieve_new" href="#ds_messenger.DirectMessenger.retrieve_new">retrieve_new</a></code></li>
<li><code><a title="ds_messenger.DirectMessenger.send" href="#ds_messenger.DirectMessenger.send">send</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>
